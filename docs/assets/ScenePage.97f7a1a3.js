var E=Object.defineProperty;var x=(h,s,e)=>s in h?E(h,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[s]=e;var n=(h,s,e)=>(x(h,typeof s!="symbol"?s+"":s,e),e);import{R as y,V as D,P as M,W as b,s as k,S as T,D as A,l as L,H as O,A as _,T as u,M as S,a as C,b as g,c as m,d as p,m as B,n as P,o as j,C as z,O as N,p as f,G as I,e as R}from"./three.module.cd558234.js";import{R as F,O as W}from"./resource-tracker.b1346dd0.js";import{a as H}from"./SceneView.fd8eaf16.js";import{d as V,B as G,C as J,w as q,o as U,k as $,l as X,e as Y,n as K,p as Q}from"./index.46de491b.js";const Z="/make-a-three-scene/assets/earth.8dffbf68.jpg",ee="/make-a-three-scene/assets/earth_outline.477e4b93.png";class te extends S{constructor(){super(...arguments);n(this,"selfSpeed")}}class se extends I{}class ie{constructor(s,e){n(this,"sceneDom");n(this,"intersects");n(this,"raycaster");n(this,"pointer");n(this,"hoverSprite");n(this,"hoverColor");n(this,"hoverName");n(this,"clickSprite");n(this,"textData");n(this,"textCount");n(this,"colors");n(this,"speed");n(this,"radius");n(this,"animationId");n(this,"camera");n(this,"renderer");n(this,"scene");n(this,"controls");n(this,"Earth");n(this,"EarthOut");n(this,"EarthAureole");n(this,"group");n(this,"satelliteTrack");n(this,"pointerMoveCopy");n(this,"meshOnclickCopy");typeof s=="string"?this.sceneDom=document.querySelector(s)||document.createElement("div"):this.sceneDom=s;const t={textData:new Array(100).fill("\u9ED8\u8BA4\u6587\u5B57"),colors:[],speed:.001,radius:"width",scaleNum:1};e&&Object.keys(e).forEach(i=>{i in t&&(t[i]=e[i])}),this.intersects=[],this.raycaster=new y,this.pointer=new D,this.hoverSprite=null,this.hoverName=null,this.clickSprite=null,this.textData=t.textData,this.textCount=t.textData.length,this.colors=t.colors,this.speed=t.speed,t.radius==="width"?this.radius=this.sceneDom.clientWidth*t.scaleNum/2:t.radius==="height"?this.radius=this.sceneDom.clientHeight*t.scaleNum/2:typeof t.radius=="number"?this.radius=t.radius:this.radius=this.sceneDom.clientHeight*t.scaleNum/2,this.pointerMoveCopy=this.pointerMove.bind(this),this.meshOnclickCopy=this.meshOnclick.bind(this),this.animationId=null,this.satelliteTrack=new F}init(){const s=this.sceneDom.clientWidth,e=this.sceneDom.clientHeight;this.camera=new M(60,s/e,1,2e3),this.camera.position.z=this.radius*1.3,this.renderer=new b({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(s,e),this.renderer.outputEncoding=k,this.sceneDom.appendChild(this.renderer.domElement),this.scene=new T;const t=new A(15794175,1);t.position.set(-250,250,100),this.scene.add(t);const i=new L(15794175,1);i.position.set(-250,250,100),this.scene.add(i);const a=new O(17771,15794175,1);a.position.set(-250,250,100),this.scene.add(a);const r=new _(15794175,.8);this.scene.add(r),this.controls=new W(this.camera,this.renderer.domElement),this.controls.autoRotate=!0}initEarth(){const s=new u().load(Z),e=new S(new C(this.radius/2,100,100),new g({map:s}));e.name="\u5730\u7403",this.Earth=e,this.scene.add(e);const t=new u().load(ee),i=new m(new p({map:t}));i.scale.x=i.scale.y=i.scale.z=this.radius*1.2,i.name="\u5730\u7403\u5916\u5708",i.position.set(0,0,0),this.EarthOut=i,this.scene.add(i);const a=new u().load(H),r=new m(new p({map:a}));r.scale.x=r.scale.y=r.scale.z=this.radius*1.3,r.name="\u5730\u7403\u5149\u6655",this.EarthAureole=r,this.scene.add(r)}initSatellites(){this.group=new se,this.group.name="\u6587\u5B57\u5B9E\u4F53";for(let s=0;s<this.textCount;s++){const e=this.initSatellite(this.radius/1.6,{x:-Math.PI*Math.random()*2,y:Math.PI*Math.random()*2,z:0},Math.random()*.005+this.speed,this.textData[s]);this.group.add(e)}this.scene.add(this.group)}initSatellite(s,e,t,i){const a=new S(new B(s,s+.1,100,1),new P({color:"#51d9ff",transparent:!0,opacity:.3})),r=new te(new C(1,1,1),new g({transparent:!0,opacity:0})),o=this.initTextCanvas(i);let l;const v=this.colors.length;v>0?l=this.colors[j.randInt(0,v-1)]:l="rgb("+[Math.round(Math.random()*200+55),Math.round(Math.random()*200+55),Math.round(Math.random()*200+55)].join(",")+")";const w=new p({map:new z(o),color:l}),c=new m(w);c.scale.x=90,c.scale.y=20,c.scale.z=20,c.position.set(s,0,0),c.name=i;const d=new N;return d.add(c),d.add(a),r.add(d),r.rotation.set((e==null?void 0:e.x)||0,(e==null?void 0:e.y)||0,(e==null?void 0:e.z)||0),r.name=i,r.selfSpeed=t,r}initTextCanvas(s){const e=document.createElement("canvas");e.width=450,e.height=100;const t=e.getContext("2d");t.fillStyle="#fff";const i=s,a=i.length>13?i.slice(0,13)+"...":i,r=Math.floor(Math.random()*20)+30;return t.font=`700 ${r}px sans-serif`,t.fillText(a,10,50),e}pointerMove(s){const e=this.sceneDom.getBoundingClientRect();if(this.pointer.x=(s.clientX-e.left)/this.sceneDom.offsetWidth*2-1,this.pointer.y=-((s.clientY-e.top)/this.sceneDom.offsetHeight)*2+1,this.raycaster.setFromCamera(this.pointer,this.camera),this.scene.children&&Array.isArray(this.scene.children)){const t=this.scene.children.find(i=>i.name==="\u6587\u5B57\u5B9E\u4F53");this.intersects=this.raycaster.intersectObjects(t?t==null?void 0:t.children:[])}}meshOnclick(){this.intersects[0]&&(this.clickSprite=this.intersects[0].object.name,this.sceneDom.dispatchEvent(new CustomEvent("satellite",{detail:{spriteName:this.clickSprite}})))}resize(){this.camera.aspect=this.sceneDom.clientWidth/this.sceneDom.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.sceneDom.clientWidth,this.sceneDom.clientHeight),this.render()}addListeners(){this.sceneDom.addEventListener("pointermove",this.pointerMoveCopy),this.sceneDom.addEventListener("click",this.meshOnclickCopy)}removeListeners(){this.sceneDom.addEventListener("pointermove",this.pointerMoveCopy),this.sceneDom.removeEventListener("click",this.meshOnclickCopy)}animate(){this.animationId=requestAnimationFrame(this.animate.bind(this)),this.render()}render(){var s,e,t,i,a,r;if(this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.EarthOut.material.rotation+=.01,this.intersects.length>0){this.hoverSprite&&(this.hoverSprite.material.color=new f(((s=this.hoverColor)==null?void 0:s.r)||0,((e=this.hoverColor)==null?void 0:e.g)||0,((t=this.hoverColor)==null?void 0:t.b)||0)),this.hoverSprite=this.intersects[0].object;const o=this.intersects[0].object.material.color;this.hoverColor={r:o.r,g:o.g,b:o.b}}else this.hoverSprite&&(this.hoverSprite.material.color=new f(((i=this.hoverColor)==null?void 0:i.r)||0,((a=this.hoverColor)==null?void 0:a.g)||0,((r=this.hoverColor)==null?void 0:r.b)||0)),this.hoverSprite=null,this.hoverColor=null,this.controls.update();this.group.children.forEach(o=>{this.hoverSprite&&this.hoverSprite.uuid===o.children[0].children[0].uuid?o.children[0].children[0].material.color=new f(1,1,1):o.rotation.z-=o.selfSpeed||.01})}run(){this.init(),this.initEarth(),this.initSatellites(),this.satelliteTrack.track(this.camera),this.satelliteTrack.track(this.renderer),this.satelliteTrack.track(this.scene),this.satelliteTrack.track(this.controls),this.addListeners(),this.animate()}stop(){this.removeListeners(),this.satelliteTrack.dispose(),this.animationId&&cancelAnimationFrame(this.animationId)}}const ne=ie,re=V({__name:"ScenePage",props:{foldChange:{type:Boolean}},setup(h){const s=h,e=["HTML5","CSS3","Less","Sass","JavaScript","TypeScript","Node.js","npm","yarn","Nuxt.js","next.js","Express","Lodash","Vue 3","Vue 2","React","Angular","Svelte","Threejs","ECharts","AntV","Element Plus","Ant Design","Vant","ESlint","VSCode","webpack","Babel","Vite","Rollup","Python","Taichi","PyCharm","Java","IntelliJ IDEA","Web 3D","qiankun","WuJie","\u5FAE\u524D\u7AEF","\u5927\u524D\u7AEF","\u5C0F\u7A0B\u5E8F","\u73B0\u4EE3 JavaScript \u6559\u7A0B","CSS SECRETS"];let t;G(()=>{t=new ne(".oribit-wrapper",{textData:e,radius:"height",scaleNum:.5}),t.run()}),J(()=>{t.stop()});function i(a){console.log(a.detail.spriteName)}return q(()=>s.foldChange,()=>{setTimeout(()=>{t.resize()},350)}),(a,r)=>(U(),$(R,null,{default:X(({theme:o})=>[Y("div",{class:K(["oribit-wrapper",o]),onSatellite:i},null,34)]),_:1}))}});const de=Q(re,[["__scopeId","data-v-d132a0da"]]);export{de as default};
