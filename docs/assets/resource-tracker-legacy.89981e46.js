!function(){function e(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register(["./three.module-legacy.67a5e23a.js"],(function(t,n){"use strict";var o,a,i,r,s,c,l,u,m,p;return{setters:[e=>{o=e.E,a=e.f,i=e.g,r=e.h,s=e.Q,c=e.i,l=e.V,u=e.O,m=e.j,p=e.k}],execute:function(){const n={type:"change"},h={type:"start"},d={type:"end"};t("O",class extends o{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new a,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:i.ROTATE,MIDDLE:i.DOLLY,RIGHT:i.PAN},this.touches={ONE:r.ROTATE,TWO:r.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return b.phi},this.getAzimuthalAngle=function(){return b.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",J),this._domElementKeyEvents=e},this.saveState=function(){o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object.zoom},this.reset=function(){o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(n),o.update(),m=u.NONE},this.update=function(){const t=new a,i=(new s).setFromUnitVectors(e.up,new a(0,1,0)),r=i.clone().invert(),c=new a,l=new s,h=2*Math.PI;return function(){const e=o.object.position;t.copy(e).sub(o.target),t.applyQuaternion(i),b.setFromVector3(t),o.autoRotate&&m===u.NONE&&x(2*Math.PI/60/60*o.autoRotateSpeed),o.enableDamping?(b.theta+=f.theta*o.dampingFactor,b.phi+=f.phi*o.dampingFactor):(b.theta+=f.theta,b.phi+=f.phi);let a=o.minAzimuthAngle,s=o.maxAzimuthAngle;return isFinite(a)&&isFinite(s)&&(a<-Math.PI?a+=h:a>Math.PI&&(a-=h),s<-Math.PI?s+=h:s>Math.PI&&(s-=h),b.theta=a<=s?Math.max(a,Math.min(s,b.theta)):b.theta>(a+s)/2?Math.max(a,b.theta):Math.min(s,b.theta)),b.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,b.phi)),b.makeSafe(),b.radius*=g,b.radius=Math.max(o.minDistance,Math.min(o.maxDistance,b.radius)),!0===o.enableDamping?o.target.addScaledVector(E,o.dampingFactor):o.target.add(E),t.setFromSpherical(b),t.applyQuaternion(r),e.copy(o.target).add(t),o.object.lookAt(o.target),!0===o.enableDamping?(f.theta*=1-o.dampingFactor,f.phi*=1-o.dampingFactor,E.multiplyScalar(1-o.dampingFactor)):(f.set(0,0,0),E.set(0,0,0)),g=1,!!(y||c.distanceToSquared(o.object.position)>p||8*(1-l.dot(o.object.quaternion))>p)&&(o.dispatchEvent(n),c.copy(o.object.position),l.copy(o.object.quaternion),y=!1,!0)}}(),this.dispose=function(){o.domElement.removeEventListener("contextmenu",$),o.domElement.removeEventListener("pointerdown",G),o.domElement.removeEventListener("pointercancel",q),o.domElement.removeEventListener("wheel",Q),o.domElement.removeEventListener("pointermove",B),o.domElement.removeEventListener("pointerup",W),null!==o._domElementKeyEvents&&o._domElementKeyEvents.removeEventListener("keydown",J)};const o=this,u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let m=u.NONE;const p=1e-6,b=new c,f=new c;let g=1;const E=new a;let y=!1;const O=new l,v=new l,P=new l,T=new l,A=new l,j=new l,w=new l,L=new l,N=new l,k=[],M={};function R(){return Math.pow(.95,o.zoomSpeed)}function x(e){f.theta-=e}function Y(e){f.phi-=e}const S=function(){const e=new a;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),E.add(e)}}(),D=function(){const e=new a;return function(t,n){!0===o.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(o.object.up,e)),e.multiplyScalar(t),E.add(e)}}(),I=function(){const e=new a;return function(t,n){const a=o.domElement;if(o.object.isPerspectiveCamera){const i=o.object.position;e.copy(i).sub(o.target);let r=e.length();r*=Math.tan(o.object.fov/2*Math.PI/180),S(2*t*r/a.clientHeight,o.object.matrix),D(2*n*r/a.clientHeight,o.object.matrix)}else o.object.isOrthographicCamera?(S(t*(o.object.right-o.object.left)/o.object.zoom/a.clientWidth,o.object.matrix),D(n*(o.object.top-o.object.bottom)/o.object.zoom/a.clientHeight,o.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)}}();function C(e){o.object.isPerspectiveCamera?g/=e:o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom*e)),o.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function _(e){o.object.isPerspectiveCamera?g*=e:o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/e)),o.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function H(e){O.set(e.clientX,e.clientY)}function z(e){T.set(e.clientX,e.clientY)}function X(){if(1===k.length)O.set(k[0].pageX,k[0].pageY);else{const e=.5*(k[0].pageX+k[1].pageX),t=.5*(k[0].pageY+k[1].pageY);O.set(e,t)}}function Z(){if(1===k.length)T.set(k[0].pageX,k[0].pageY);else{const e=.5*(k[0].pageX+k[1].pageX),t=.5*(k[0].pageY+k[1].pageY);T.set(e,t)}}function F(){const e=k[0].pageX-k[1].pageX,t=k[0].pageY-k[1].pageY,n=Math.sqrt(e*e+t*t);w.set(0,n)}function U(e){if(1==k.length)v.set(e.pageX,e.pageY);else{const t=ne(e),n=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);v.set(n,o)}P.subVectors(v,O).multiplyScalar(o.rotateSpeed);const t=o.domElement;x(2*Math.PI*P.x/t.clientHeight),Y(2*Math.PI*P.y/t.clientHeight),O.copy(v)}function K(e){if(1===k.length)A.set(e.pageX,e.pageY);else{const t=ne(e),n=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);A.set(n,o)}j.subVectors(A,T).multiplyScalar(o.panSpeed),I(j.x,j.y),T.copy(A)}function V(e){const t=ne(e),n=e.pageX-t.x,a=e.pageY-t.y,i=Math.sqrt(n*n+a*a);L.set(0,i),N.set(0,Math.pow(L.y/w.y,o.zoomSpeed)),C(N.y),w.copy(L)}function G(e){!1!==o.enabled&&(0===k.length&&(o.domElement.setPointerCapture(e.pointerId),o.domElement.addEventListener("pointermove",B),o.domElement.addEventListener("pointerup",W)),function(e){k.push(e)}(e),"touch"===e.pointerType?function(e){switch(te(e),k.length){case 1:switch(o.touches.ONE){case r.ROTATE:if(!1===o.enableRotate)return;X(),m=u.TOUCH_ROTATE;break;case r.PAN:if(!1===o.enablePan)return;Z(),m=u.TOUCH_PAN;break;default:m=u.NONE}break;case 2:switch(o.touches.TWO){case r.DOLLY_PAN:if(!1===o.enableZoom&&!1===o.enablePan)return;o.enableZoom&&F(),o.enablePan&&Z(),m=u.TOUCH_DOLLY_PAN;break;case r.DOLLY_ROTATE:if(!1===o.enableZoom&&!1===o.enableRotate)return;o.enableZoom&&F(),o.enableRotate&&X(),m=u.TOUCH_DOLLY_ROTATE;break;default:m=u.NONE}break;default:m=u.NONE}m!==u.NONE&&o.dispatchEvent(h)}(e):function(e){let t;switch(e.button){case 0:t=o.mouseButtons.LEFT;break;case 1:t=o.mouseButtons.MIDDLE;break;case 2:t=o.mouseButtons.RIGHT;break;default:t=-1}switch(t){case i.DOLLY:if(!1===o.enableZoom)return;!function(e){w.set(e.clientX,e.clientY)}(e),m=u.DOLLY;break;case i.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===o.enablePan)return;z(e),m=u.PAN}else{if(!1===o.enableRotate)return;H(e),m=u.ROTATE}break;case i.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===o.enableRotate)return;H(e),m=u.ROTATE}else{if(!1===o.enablePan)return;z(e),m=u.PAN}break;default:m=u.NONE}m!==u.NONE&&o.dispatchEvent(h)}(e))}function B(e){!1!==o.enabled&&("touch"===e.pointerType?function(e){switch(te(e),m){case u.TOUCH_ROTATE:if(!1===o.enableRotate)return;U(e),o.update();break;case u.TOUCH_PAN:if(!1===o.enablePan)return;K(e),o.update();break;case u.TOUCH_DOLLY_PAN:if(!1===o.enableZoom&&!1===o.enablePan)return;!function(e){o.enableZoom&&V(e),o.enablePan&&K(e)}(e),o.update();break;case u.TOUCH_DOLLY_ROTATE:if(!1===o.enableZoom&&!1===o.enableRotate)return;!function(e){o.enableZoom&&V(e),o.enableRotate&&U(e)}(e),o.update();break;default:m=u.NONE}}(e):function(e){switch(m){case u.ROTATE:if(!1===o.enableRotate)return;!function(e){v.set(e.clientX,e.clientY),P.subVectors(v,O).multiplyScalar(o.rotateSpeed);const t=o.domElement;x(2*Math.PI*P.x/t.clientHeight),Y(2*Math.PI*P.y/t.clientHeight),O.copy(v),o.update()}(e);break;case u.DOLLY:if(!1===o.enableZoom)return;!function(e){L.set(e.clientX,e.clientY),N.subVectors(L,w),N.y>0?C(R()):N.y<0&&_(R()),w.copy(L),o.update()}(e);break;case u.PAN:if(!1===o.enablePan)return;!function(e){A.set(e.clientX,e.clientY),j.subVectors(A,T).multiplyScalar(o.panSpeed),I(j.x,j.y),T.copy(A),o.update()}(e)}}(e))}function W(e){ee(e),0===k.length&&(o.domElement.releasePointerCapture(e.pointerId),o.domElement.removeEventListener("pointermove",B),o.domElement.removeEventListener("pointerup",W)),o.dispatchEvent(d),m=u.NONE}function q(e){ee(e)}function Q(e){!1!==o.enabled&&!1!==o.enableZoom&&m===u.NONE&&(e.preventDefault(),o.dispatchEvent(h),function(e){e.deltaY<0?_(R()):e.deltaY>0&&C(R()),o.update()}(e),o.dispatchEvent(d))}function J(e){!1!==o.enabled&&!1!==o.enablePan&&function(e){let t=!1;switch(e.code){case o.keys.UP:I(0,o.keyPanSpeed),t=!0;break;case o.keys.BOTTOM:I(0,-o.keyPanSpeed),t=!0;break;case o.keys.LEFT:I(o.keyPanSpeed,0),t=!0;break;case o.keys.RIGHT:I(-o.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),o.update())}(e)}function $(e){!1!==o.enabled&&e.preventDefault()}function ee(e){delete M[e.pointerId];for(let t=0;t<k.length;t++)if(k[t].pointerId==e.pointerId)return void k.splice(t,1)}function te(e){let t=M[e.pointerId];void 0===t&&(t=new l,M[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ne(e){const t=e.pointerId===k[0].pointerId?k[1]:k[0];return M[t.pointerId]}o.domElement.addEventListener("contextmenu",$),o.domElement.addEventListener("pointerdown",G),o.domElement.addEventListener("pointercancel",q),o.domElement.addEventListener("wheel",Q,{passive:!1}),this.update()}});class b extends p{constructor(...t){super(...t),e(this,"uniforms",void 0)}}t("R",class{constructor(){e(this,"resources",void 0),this.resources=new Set}track(e){if(!e)return e;if(Array.isArray(e))return e.forEach((e=>this.track(e))),e;if((e.dispose||e instanceof u)&&this.resources.add(e),e instanceof u)e.geometry&&this.track(e.geometry),e.material&&this.track(e.material),this.track(e.children);else if(e instanceof b){for(const t of Object.values(e))t instanceof m&&this.track(t);if(e.uniforms)for(const t of Object.values(e.uniforms))if(t){const e=t.value;(e instanceof m||Array.isArray(e))&&this.track(e)}}return e}untrack(e){this.resources.delete(e)}dispose(){for(const e of this.resources)e instanceof u&&e.parent&&e.parent.remove(e),e.dispose&&e.dispose();this.resources.clear()}})}}}))}();
